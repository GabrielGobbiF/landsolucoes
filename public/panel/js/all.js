function initTable(){const e=$('meta[name="js-base_url_api"]').attr("content"),t=$('meta[name="js-base_url"]').attr("content"),a=$('meta[name="url"]').attr("content"),n=$("#table-api");var o=n.attr("data-table"),l=n.attr("order"),s={};if($("#preloader-content").remove(),$(".table-api").append(preload()),$.each($(".search-input"),(function(){null!=$(this).attr("name")&&(s[$(this).attr("name")]=$(this).val()??"")})),n.length>0){var i=null==n.attr("data-paginate"),r=null==n.attr("data-export"),c=null==n.attr("data-collums"),d=(n.attr("data-click-select"),null!=n.attr("data-target")),m=n.attr("data-click");n.bootstrapTable("refreshOptions",{locale:"pt-BR",method:"get",url:`${e}${o}`,dataType:"json",classes:"table table-hover table-striped",pageList:"[10, 25, 50, 100, all]",cookie:!0,cache:!0,search:!0,showExport:r,showColumns:c,idField:"id",toolbar:"#toolbar",buttonsClass:"dark",showColumnsToggleAll:!0,pageSize:20,cookieIdTable:o,queryParamsType:"all",striped:!0,pagination:i,sidePagination:"server",pageNumber:1,cookiesEnabled:"['bs.table.sortOrder', 'bs.table.sortName', 'bs.table.columns', 'bs.table.searchText', 'bs.table.filterControl']",mobileResponsive:!0,queryParams:function(e){return{sort:e.sortName??l,order:e.sortOrder,search:e.searchText,page:e.pageNumber,pageSize:i?e.pageSize:"all",filter:s??{}}},responseHandler:function(e){return{total:e.meta?e.meta.total:null,rows:e.data}},onClickCell:function(e,n,o,l){"false"!=m&&"observations"!=e&&"statusButton"!=e&&(d?window.open(`${t}${a}/${o.id}`,"_blank"):window.location.href=`${t}${a}/${o.id}`)},onLoadSuccess:function(){$("#preloader-content").remove(),$(".table-responsive").removeClass("d-none")}})}$(".search-input .modify").on("change",(function(){initTable()}))}function preload(){return'<div class="text-center" id="preloader-content">    <div class="spinner-border text-primary m-1 align-self-center" role="status">        <span class="sr-only"></span>    </div></div>'}function resetDiv(){$(".acompanhamentoOrCurso").removeClass("d-none"),$(".table-mensal").addClass("d-none"),$(".table-epi").addClass("d-none")}jQuery((function(){"use strict";initTable()})),function(e){"use strict";console.log("init helpers");e('meta[name="js-base_url_api"]').attr("content");Dropzone.autoDiscover=!1,e(".js-btn-delete").on("click",(function(){let t=e(this).attr("data-text")||"Deletar",a=e(this).attr("data-action")||"DELETE";var n='<div class="modal fade effect-scale" id="modal-confirm-delete" tabindex="-1" role="dialog" aria-hidden="true">';n+='       <div class="modal-dialog modal-dialog-centered modal-sm" role="document">',n+='           <div class="modal-content">',n+='               <div class="modal-header">',n+='                   <h6 class="modal-title"></h6>',n+='                   <button type="button" class="close" data-dismiss="modal" aria-label="Close">',n+='                       <i class="fa fa-times"></i>',n+="                   </button>",n+="               </div>",n+='               <div class="modal-body">',n+='                   <p class="mg-b-0 modal-text-body"></p>',n+="               </div>",n+='               <div class="modal-footer">',n+='                   <button type="button" id="modal-cancel" class="btn btn-secondary" data-dismiss="modal">Cancel</button>',n+='                      <form id="form-delete" role="form" class="needs-validation" action="" method="POST">',n+=`                          <input type="hidden" name="_token" value="${e('meta[name="csrf-token"]').attr("content")}"> `,n+=`                          <input type="hidden" name="_method" value="${a}"> `,n+='                          <button type="submit" id="modal-confirm"',n+='                              data-btn-text="Deletando" ',n+='                              class="btn btn-danger ',n+='                              btn-submit modal-btn-danger"> ',n+="                              Deletar",n+="                          </button>",n+="                      </form>",n+="               </div>",n+="           </div>",n+="       </div>",n+="</div>",e("body").append(n);var o=e("#modal-confirm-delete"),l=e(this).attr("data-href");null!=t&&(o.find(".modal-title").html(`${t}`),o.find(".btn-danger").html(`<i class="fas fa-exclamation-circle"></i> ${t}`),o.find(".modal-text-body").html(`Tem certeza que deseja ${t}?`)),o.find("#form-delete").attr("action",l),o.modal("show"),o.on("hidden.bs.modal",(function(){o.remove()}))})),e(".date").mask("00/00/0000"),e(".money").mask("000.000.000.000.000,00",{reverse:!0}),e(".rg").mask("00000000-0"),e(".cnpj").mask("00.000.000/0000-00"),e(".date_time").mask("00/00/0000 00:00"),e(".game_type").mask("0v0"),e(".phone").mask("(00)  0000-0000");var t=function(e){return 11===e.replace(/\D/g,"").length?"(00) 00000-0000":"(00) 0000-00009"},a={onKeyPress:function(e,a,n,o){n.mask(t.apply({},arguments),o)}};e(".sp_celphones").mask(t,a),toastr.options={closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!0,positionClass:"toast-bottom-center",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"800",timeOut:"3000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},e(".btn-change").on("click",(function(){var t=e(this).data("href");e("#modal-change").modal("show"),e("#documento_id").val(t),e("#modal-confirm").on("click",(function(){""==e("#reason").val()?toastr.error("Motivo é obrigatorio"):""==e("#file_document_change").val()?toastr.error("Documento é obrigatorio"):e("#form_change").submit()}))})),(null==localStorage.getItem("nav-tabs_employee")||null==localStorage.getItem("nav-tabs_employee"))&&localStorage.setItem("nav-tabs_employee","dados-tab");var n=localStorage.getItem("nav-tabs_employee"),o=n.replace("-tab","");e(".nav-link_employee").removeClass("active"),e("#"+n).addClass("active"),e(".tab-pane_employee").removeClass("show active"),e("#"+o).addClass("show active"),e(".nav-link_employee").on("click",(function(){var t=e(this).attr("id");localStorage.setItem("nav-tabs_employee",t),e(".nav-link_employee").removeClass("active"),e(".tab-pane_employee").removeClass("show active");var a=t.replace("-tab","");e("#"+a).addClass("show active"),e("#"+t).addClass("active")})),(null==localStorage.getItem("nav-link_auditory")||null==localStorage.getItem("nav-link_auditory"))&&localStorage.setItem("nav-link_auditory","v-pills-entrevista-tab");var l=localStorage.getItem("nav-link_auditory"),s=l.replace("-tab","");e(".nav-link_auditory").removeClass("active"),e("#"+l).addClass("active"),e(".tab-pane_auditory").removeClass("show active"),e("#"+s).addClass("show active"),e(".nav-link_auditory").on("click",(function(){var t=e(this).attr("id");localStorage.setItem("nav-link_auditory",t),e(".nav-link_auditory").removeClass("active"),e(".tab-pane_auditory").removeClass("show active");var a=t.replace("-tab","");e("#"+a).addClass("show active"),e("#"+t).addClass("active"),resetDiv()})),e(".nav-header").on("click",(function(){localStorage.setItem("nav-tabs_employee","dados-tab"),localStorage.setItem("nav-link_auditory","v-pills-entrevista-tab")})),"documentos-tab"==window.location.hash&&e("#myTab_employee #documentos-tab").tab("show"),e(".back").on("click",(function(){e(".acompanhamentoOrCurso").removeClass("d-none"),e(".table-mensal").addClass("d-none"),e(".table-epi").addClass("d-none")})),e("#cnh_check").on("change",(function(){e(this).is(":checked")?(e(".div--cnh_number").removeClass("d-none"),e(".div--cnh_validity").removeClass("d-none")):(e("#input--cnh_number").val(""),e(".div--cnh_number").addClass("d-none"),e(".div--cnh_validity").addClass("d-none"))})),e("#cursos_employee").bootstrapDualListbox({filterTextClear:"mostrar todos",filterPlaceHolder:"Filtar",moveSelectedLabel:"Move selected",moveAllLabel:"Mover todos",removeSelectedLabel:"Remover selecionados",removeAllLabel:"Remover todos",moveOnSelect:!0,preserveSelectionOnMove:!1,selectedListLabel:!1,nonSelectedListLabel:!1,helperSelectNamePostfix:"_helper",selectorMinimalHeight:300,showFilterInputs:!0,nonSelectedFilter:"",selectedFilter:"",infoText:"Todos {0}",infoTextFiltered:'<span class="badge badge-warning">Filtrar</span> {0} from {1}',infoTextEmpty:"Lista vazia",sortByInputOrder:!1,filterOnValues:!1,eventMoveOverride:!1,eventMoveAllOverride:!1,eventRemoveOverride:!1,eventRemoveAllOverride:!1,btnClass:"btn-outline-secondary",btnMoveText:"&gt;",btnRemoveText:"&lt;",btnMoveAllText:"&gt;&gt;",btnRemoveAllText:"&lt;&lt;"}),e(".js-btn-confirm").on("click",(function(t){t.preventDefault();const a=e(this);(click++,a.html('<i class="fa fa-exclamation-circle"></i>'),a.addClass("js-click-to-confirm"),2==click)&&a.closest("form").submit();clearTimeout(timeButtonConfirm),timeButtonConfirm=setTimeout((function(){a.html('<i class="fa fa-trash"></i>'),a.removeClass("js-click-to-confirm"),click=0}),1900)}))}(jQuery);const txHeight=100,tx=document.getElementsByTagName("textarea");for(let e=0;e<tx.length;e++)""==tx[e].value?tx[e].setAttribute("style","height:100px;overflow-y:hidden;"):tx[e].setAttribute("style","height:"+tx[e].scrollHeight+"px;overflow-y:hidden;");for(var elements=document.getElementsByClassName("btn-submit"),formSubmit=function(){var e=this.closest("form"),t=!0,a=this.getAttribute("data-btn-text"),n=this.innerHTML;a=null!=a?a:"Salvando...",this.innerHTML=`<i class='fa fa-spinner fa-spin'></i> ${a}`,this.disabled=!0,$.each(e.elements,(function(e,a){""===a.value&&a.hasAttribute("required")&&(a.classList.add("is-invalid"),t=!1),a.addEventListener("keyup",(e=>{""!=e.value&&a.classList.remove("is-invalid")}))})),t?e.submit():(this.innerHTML=n,this.disabled=!1)},i=0;i<elements.length;i++)elements[i].addEventListener("click",formSubmit,!1);function axiosCath(){return'<div class="text-center"><a onclick="location.reload()" class="btn btn-sm btn-danger"><i class="fas fa-redo-alt"></i> ERROR - Recarregar</a> </div>'}function limpa_formulário_cep(){document.getElementById("input--street").value="",document.getElementById("input--district").value="",document.getElementById("input--city").value="",document.getElementById("input--state").value=""}function meu_callback(e){"erro"in e?limpa_formulário_cep():(document.getElementById("input--street").value=e.logradouro,document.getElementById("input--district").value=e.bairro,document.getElementById("input--city").value=e.localidade,document.getElementById("input--state").value=e.uf)}function pesquisacep(e){var t=e.replace(/\D/g,"");if(""!=t){if(/^[0-9]{8}$/.test(t)){document.getElementById("input--street").value="consultando";var a=document.createElement("script");a.src="//viacep.com.br/ws/"+t+"/json/?callback=meu_callback",document.body.appendChild(a)}else limpa_formulário_cep()}else limpa_formulário_cep()}const selectAxOption=(e,t)=>({valueField:t,labelField:"name",searchField:"search",preload:!0,firstUrl:function(t){const a=e.includes("?")?"&":"?";return`${e}${a}search=${encodeURIComponent(t)}&pageSize=30`},load:function(t,a){const n=e.includes("?")?"&":"?";var o=`${e}${n}search=${encodeURIComponent(t)}&pageSize=30`;fetch(o).then((e=>e.json())).then((e=>{a(e.data)})).catch((()=>{a()}))},onItemAdd:function(e,t){this.setTextboxValue("")}});window.newSelect=e=>{let t=document.querySelector('meta[name="url"]').content,a=!!e.dataset.create,n=e.dataset.request,o=e.dataset.valueField??"id",l=e.dataset.searchTable??null,s=`${e.id}__${t}`,i=localStorage.getItem(`${e.id}__${t}`),r={persist:!1,createOnBlur:!1,create:a,openOnFocus:!0,maxOptions:null,onChange:function(t){e.classList.contains("search")&&localStorage.setItem(s,t)}};if(n&&(r=Object.assign(r,selectAxOption(n,o))),null!=e.getAttribute("multiple")&&(r=Object.assign(r,{plugins:{remove_button:{title:"Remove this item"}}})),null==i&&null==i||(r=Object.assign(r,{items:i.split(",")})),new TomSelect(e,r),l){let t=e.querySelector(`#${e.id}-ts-control`);t&&t.setAttribute("data-search-table",l)}},document.querySelectorAll(".t-select").forEach((e=>{newSelect(e)}));
